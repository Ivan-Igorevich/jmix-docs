= treeDataGrid 树形数据网格

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/data-grid-tree" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

`treeDataGrid` 是一个用来展示层级表格数据的组件，这些数据按照可收放的节点分组。

* XML 元素：`treeDataGrid`

* Java 类：`TreeDataGrid`

== 基本用法

`treeDataGrid` 功能基本上与 xref:flow-ui:vc/components/dataGrid.adoc[dataGrid] 组件一致。

在视图 XML 中声明式定义 `treeDataGrid` 的示例：

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/treedatagrid/tree-data-grid-view.xml[tags=data;departmentsDc;layout;basics]
----

<1> `Department` 实体的 xref:flow-ui:data/collection-container.adoc[集合容器]。
<2> `treeDataGrid` 通过 `dataContainer` 属性与 `departmentsDc` 容器绑定。
<3> `columns` 元素定义在树形网格中展示哪些实体属性。

image::visual-components/components/tree-data-grid-basics.png[align="center", width="563"]

== XML 属性

xref:vc/common-attributes.adoc#id[id] -
xref:vc/common-attributes.adoc#alignSelf[alignSelf] -
xref:flow-ui:vc/components/dataGrid.adoc#allRowsVisible[allRowsVisible] -
xref:vc/common-attributes.adoc#classNames[classNames] -
xref:vc/common-attributes.adoc#colspan[colspan] -
xref:flow-ui:vc/components/dataGrid.adoc#columnReorderingAllowed[columnReorderingAllowed] -
xref:vc/common-attributes.adoc#css[css] -
xref:vc/common-attributes.adoc#dataContainer[dataContainer] -
xref:flow-ui:vc/components/dataGrid.adoc#detailsVisibleOnClick[detailsVisibleOnClick] -
xref:flow-ui:vc/components/dataGrid.adoc#dropMode[dropMode] -
xref:flow-ui:vc/components/dataGrid.adoc#editorBuffered[editorBuffered] -
xref:vc/common-attributes.adoc#enabled[enabled] -
xref:vc/common-attributes.adoc#height[height] -
<<hierarchyProperty,hierarchyProperty>> -
xref:vc/common-attributes.adoc#maxHeight[maxHeight] -
xref:vc/common-attributes.adoc#maxWidth[maxWidth] -
xref:vc/components/entityPicker.adoc#metaClass[metaClass] -
xref:vc/common-attributes.adoc#minHeight[minHeight] -
xref:vc/common-attributes.adoc#minWidth[minWidth] -
// xref:flow-ui:vc/components/dataGrid.adoc#multiSort[multiSort] -
xref:flow-ui:vc/components/dataGrid.adoc#nestedNullBehavior[nestedNullBehavior] -
xref:flow-ui:vc/components/dataGrid.adoc#pageSize[pageSize] -
xref:flow-ui:vc/components/dataGrid.adoc#rowDraggable[rowDraggable] -
xref:flow-ui:vc/components/dataGrid.adoc#selectionMode[selectionMode] -
<<showOrphans,showOrphans>> -
xref:vc/common-attributes.adoc#tabIndex[tabIndex] -
xref:vc/common-attributes.adoc#themeNames[themeNames] -
xref:vc/common-attributes.adoc#visible[visible] -
xref:vc/common-attributes.adoc#width[width]

[[hierarchyProperty]]
=== hierarchyProperty

`hierarchyProperty` 是必需属性，定义引用自身实体属性的名称，即树形结构的键值属性。

[[showOrphans]]
=== showOrphans

孤立记录是指不存在的父记录的子记录。通常这是由于过滤或分页，导致从数据库中仅加载了部分数据造成的。

`showOrphans` 属性用来控制是否显示孤立记录。如果设置为 `false`，则组件不会显示孤立记录。否则，孤立记录会作为树的顶层根节点展示。

默认值为 `false`。

在使用过滤器时，隐藏孤立记录更符合人们的习惯。但是，这样会导致分页有问题，某些页可能是空的或者只有一半数据，所以在使用树形组件时，最好不要使用 `SimplePagination` 组件。

== 事件和处理器

xref:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
xref:vc/common-handlers.adoc#BlurEvent[BlurEvent] -
xref:flow-ui:vc/components/dataGrid.adoc#CellFocusEvent[CellFocusEvent] -
<<CollapseEvent,CollapseEvent>> -
xref:flow-ui:vc/components/dataGrid.adoc#ColumnReorderEvent[ColumnReorderEvent] -
xref:flow-ui:vc/components/dataGrid.adoc#ColumnResizeEvent[ColumnResizeEvent] -
xref:vc/common-handlers.adoc#DetachEvent[DetachEvent] -
<<ExpandEvent,ExpandEvent>> -
xref:vc/common-handlers.adoc#FocusEvent[FocusEvent] -
xref:flow-ui:vc/components/dataGrid.adoc#GridDragEndEvent[GridDragEndEvent] -
xref:flow-ui:vc/components/dataGrid.adoc#GridDragStartEvent[GridDragStartEvent] -
xref:flow-ui:vc/components/dataGrid.adoc#GridDropEvent[GridDropEvent] -
xref:flow-ui:vc/components/dataGrid.adoc#ItemClickEvent[ItemClickEvent] -
xref:flow-ui:vc/components/dataGrid.adoc#ItemDoubleClickEvent[ItemDoubleClickEvent] -
xref:flow-ui:vc/components/dataGrid.adoc#SortEvent[SortEvent] -
xref:flow-ui:vc/components/dataGrid.adoc#classNameGenerator[classNameGenerator] -
xref:flow-ui:vc/components/dataGrid.adoc#dataGenerator[dataGenerator] -
xref:flow-ui:vc/components/dataGrid.adoc#dragFilter[dragFilter] -
xref:flow-ui:vc/components/dataGrid.adoc#dropFilter[dropFilter]

include::../handler-generation-tip.adoc[]

[[CollapseEvent]]
=== CollapseEvent

`com.vaadin.flow.component.treegrid.CollapseEvent` 当节点收起时发送。

[[ExpandEvent]]
=== ExpandEvent

`com.vaadin.flow.component.treegrid.ExpandEvent` 当节点展开时发送。


== XML 内部元素

xref:flow-ui:vc/components/dataGrid.adoc#actions[actions] -
xref:flow-ui:vc/components/dataGrid.adoc#columns[columns]

== 参考

{vaadin-docs}/components/tree-grid[Vaadin 文档^]
