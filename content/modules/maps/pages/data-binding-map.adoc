= 1. Creating a Map Binding to Data

In this chapter, you will create:

* The `LocationType` enumeration.
* The `Location` entity.
* CRUD views with a map on the `Location.detail` view.

[[entity-and-views-creation]]
== Creating Location Entity and Views

First let's create a `LocationType` enumeration with two values: `Office` and `Coworking`. The detailed steps for creating enumerations are in the xref:tutorial:enumerations.adoc[Using Enumerations] section of Tutorial.

image::enumeration-location-type.png[align="center", width="591"]

Then create the `Location` entity. The detailed steps for creating entities are in the xref:tutorial:simple-crud.adoc[Simple CRUD] section of Tutorial.

Select the *Traits â†’ Versioned* checkbox in the *New JPA Entity* dialog:

image::new-location-entity-dialog.png[align="center", width="493"]

The `Location` entity has the following attributes:

* `city` with `String` type. Select the *Mandatory* checkbox.
* `address` with `String` type. Select the *Mandatory* checkbox.
* `type` with `LocationType` enumeration type.
* `building` with `GeoPoint` type:
+
image::geo-point-attribute.png[align="center", width="862"]

Define the `address` attribute for generating an xref:studio:entity-designer.adoc#creating-instance-name[instance name].

Switch to the *Text* tab of *Entity designer* and add the `@Geometry` annotation to the `building` attribute.

image::location-entity-text.png[align="center", width="843"]

Create CRUD views for the `Location` entity. The detailed steps for creating entity list and detail views are in the xref:tutorial:simple-crud.adoc#create-views[Creating CRUD Views] section of Tutorial.

Accept the suggested values on the all steps of the view creation wizard.

Studio will generate two views: `Location.list` and `Location.detail` and open their source code.

[[adding-map]]
== Adding Map on View

Find `location-detail-view.xml` in the *Jmix* tool window and double-click it. The view designer appears:

image::location-detail-view.png[align="center", width="1318"]

As you can see, the `textField` component is used to display `building`.

To display a map on the screen, you need to add `geoMap` UI component in the XML descriptor.

=== Setting Map View

=== Adding Tile Layer

=== Adding Data Layer

== Saving Coordinates to the Building Attribute

=== Adding MapClickEvent

=== Converting Coordinates to Point

