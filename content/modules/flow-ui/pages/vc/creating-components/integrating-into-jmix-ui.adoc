= Интеграция в Jmix UI

После создания клиентской и серверной частей компонента его можно использовать в xref:views/views.adoc[экранах] путем создания экземпляра его Java-класса и добавления в родительский компонент.

Обычно содержимое экрана определяется в XML-дескрипторе. Этот раздел описывает, как предоставить возможность использовать новый компонент в XML и в визуальном дизайнере Studio так же, как стандартные компоненты Jmix UI.

[[support-in-xml-descriptors]]
== Поддержка в XML-дескрипторах

Ниже приведен пример реализации поддержки XML для компонента Slider, созданного в разделе xref:vc/creating-components/js-component.adoc[предыдущем].

. Создайте файл `app-ui-components.xsd` и определите XML-разметку для компонента:
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/app-ui-components.xsd[tags=xsd-schema;!theme-toggle-schema]
----

. Создайте загрузчик компонента, который необходим для инициализации компонента при его использовании в XML-описателях экрана.
+
[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/component/SliderLoader.java[tags=slider-loader]
----
<1> Базовый класс предоставляет вспомогательные методы для загрузки значений атрибутов.
<2> Метод `componentLoader()` возвращает экземпляр бина `ComponentLoaderSupport`, который предоставляет методы для загрузки общих атрибутов.

. Чтобы зарегистрировать компонент и его загрузчик в фреймворке, необходимо создать класс конфигурации Spring используя аннотацию `@Configuration`:
+
[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/ComponentRegistrationConfiguration.java[tags=component-registration-configuration;!theme-toggle-registration]
----

После этого компонент `Slider` может быть определен в дескрипторе экрана:

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/customcomponent/jscomponent/js-component-view.xml[tags=slider-xml]
----
<1> Пространство имен задается с тем же значением, что и в атрибутах `xmlns` и `targetNamespace` XSD компонента.
<2> Элемент `slider` добавляется с префиксом пространства имен.

[[studio-support]]
== Поддержка в Studio

Чтобы Studio поддерживала новый компонент, необходимо создать интерфейс, аннотированный `@StudioUiKit`, и метод, аннотированный `@StudioComponent`:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/component/StudioComponents.java[tags=studio-components]
----

После этого Studio отобразит новый компонент в палитре *Add Component*:

image::visual-components/creating-components/add-component-menu.png[align="center", width="395"]

И покажет доступные свойства компонента в инспекторе:

image::visual-components/creating-components/studio-support.png[align="center", width="428"]