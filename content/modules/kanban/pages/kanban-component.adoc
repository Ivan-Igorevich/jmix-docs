= Kanban Component
:table-caption!:

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/kanban-simple" class="live-demo-btn" target="_blank">LIVE DEMO</a>
</div>
++++

The `kanban` UI component represents a kanban board. The board shows workflow at different stages of a project using cards for tasks and columns for each stage.

[cols="2h,8", grid=none]
|===
|XML Element
|`kanban`
|Java Class
|`Kanban`
|Attributes
|xref:flow-ui:vc/common-attributes.adoc#id[id] -
xref:flow-ui:vc/common-attributes.adoc#alignSelf[alignSelf] -
<<applyColumnColorToTasks,applyColumnColorToTasks>> -
<<autoColumnHeightEnabled,autoColumnHeightEnabled>> -
<<autoSave,autoSave>> -
xref:flow-ui:vc/common-attributes.adoc#classNames[classNames] -
<<collapsible,collapsible>> -
xref:flow-ui:vc/common-attributes.adoc#colspan[colspan] -
<<columnActionsEnabled,columnActionsEnabled>> -
<<columnColorEntireSurfaceEnabled,columnColorEntireSurfaceEnabled>> -
<<columnFooterVisible,columnFooterVisible>> -
<<columnHidingAllowed,columnHidingAllowed>> -
<<columnReorderingAllowed,columnReorderingAllowed>> -
<<columnSummaryEnabled,columnSummaryEnabled>> -
<<columnsWidth,columnsWidth>> -
xref:flow-ui:vc/common-attributes.adoc#css[css] -
xref:flow-ui:vc/common-attributes.adoc#dataContainer[dataContainer] -
<<dragAllowed,dragAllowed>> -
<<dropAllowed,dropAllowed>> -
<<dropPlaceholderAllowed,dropPlaceholderAllowed>> -
xref:flow-ui:vc/common-attributes.adoc#enabled[enabled] -
xref:flow-ui:vc/common-attributes.adoc#height[height] -
<<hierarchyMode,hierarchyMode>> -
xref:flow-ui:vc/common-attributes.adoc#maxHeight[maxHeight] -
xref:flow-ui:vc/common-attributes.adoc#maxWidth[maxWidth] -
xref:flow-ui:vc/common-attributes.adoc#minHeight[minHeight] -
xref:flow-ui:vc/common-attributes.adoc#minWidth[minWidth] -
<<swimlanesFrom,swimlanesFrom>> -
<<swimlanesTo,swimlanesTo>> -
<<taskColorEntireSurfaceEnabled,taskColorEntireSurfaceEnabled>> -
<<taskDueDateVisible,taskDueDateVisible>> -
<<taskPosition,taskPosition>> -
<<taskPriorityVisible,taskPriorityVisible>> -
<<taskProgressVisible,taskProgressVisible>> -
<<taskTagsVisible,taskTagsVisible>> -
<<taskUserAvatarVisible,taskUserAvatarVisible>> -
xref:flow-ui:vc/common-attributes.adoc#visible[visible] -
xref:flow-ui:vc/common-attributes.adoc#width[width]
|Handlers
|xref:flow-ui:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
xref:flow-ui:vc/common-handlers.adoc#DetachEvent[DetachEvent] -
<<KanbanColumnClickEvent,KanbanColumnClickEvent>> -
<<KanbanColumnDoubleClickEvent,KanbanColumnDoubleClickEvent>> -
<<KanbanColumnCollapseEvent,KanbanColumnCollapseEvent>> -
<<KanbanColumnExpandEvent,KanbanColumnExpandEvent>> -
<<KanbanColumnHideEvent,KanbanColumnHideEvent>> -
<<KanbanColumnReorderEvent,KanbanColumnReorderEvent>> -
<<KanbanColumnShowEvent,KanbanColumnShowEvent>> -
<<KanbanDragEndEvent,KanbanDragEndEvent>> -
<<KanbanDragStartEvent,KanbanDragStartEvent>> -
<<KanbanTaskClickEvent,KanbanTaskClickEvent>> -
<<KanbanTaskDoubleClickEvent,KanbanTaskDoubleClickEvent>> -
<<saveDelegate,saveDelegate>> -
|Elements
|<<actions,actions>> -
<<columnFooterRendererFunction,columnFooterRendererFunction>> -
<<columnHeaderRendererFunction,columnHeaderRendererFunction>> -
<<columns,columns>> -
<<column,column>> -
<<swimlanes,swimlanes>> -
<<swimlane,swimlane>> -
<<taskRendererFunction,taskRendererFunction>>
|===

[[basic]]
== Basics

To create the component, use the `kanban` XML element and bind it to xref:flow-ui:data/data-containers.adoc[data container]. To do this, you can use Jmix Studio.

image::create-kanban-component.png[align="center", width="1318"]

The new `kanban` element will be added in both the *Jmix UI* structure panel and in the XML. You can configure attributes like xref:flow-ui:vc/common-attributes.adoc#id[id], xref:flow-ui:vc/common-attributes.adoc#height[height], xref:flow-ui:vc/common-attributes.adoc#width[width], etc., in the same way as it is done for other xref:flow-ui:vc/components.adoc[UI components].

[source,xml,indent=0]
----
<kanban:kanban id="kanban"
               height="100%"
               width="100%"/>
----

If you don't use the view designer, declare the `kanban` namespace in your view's XML descriptor manually:

[source,xml,indent=0]
----
include::../examples/kanban-ex1/src/main/resources/com/company/onboarding/view/kanban/kanban-view.xml[tags=xmlns]
----

Then, specify which data and columns want to display:

* To display columns, add the <<columns,columns>> element with `columnsEnum` attribute.
* To configure the mapping of entity fields, use the <<propertiesMapping,propertiesMapping>> element.

The following example demonstrates how a basic `kanban` is created:
[source,xml,indent=0]
----
include::../examples/kanban-ex1/src/main/resources/com/company/onboarding/view/kanban/kanban-view.xml[tags=data;collection-container;layout;basic]
----

image::kanban-basic.png[align="center",width="804"]

[[data-binding]]
== Data Binding

Data binding refers to linking a visual component to a data container. Kanban can display data loaded to either xref:flow-ui:data/collection-container.adoc[collection container] or xref:flow-ui:data/key-value-containers.adoc[key-value container].

[[collection-container]]
=== Collection Container

Typically, you bind a `kanban` to data declaratively in the XML descriptor using the `dataContainer` attribute. This attribute should refer to a xref:flow-ui:data/collection-container.adoc[collection container],  that holds the data you want to display. Please see the relevant <<basic, example>> in the previous section.

[[key-value-containers-binding]]
=== Key-Value Container

It is also possible to bind the `kanban` to a xref:flow-ui:data/key-value-containers.adoc[key-value container]. For example:

[source,xml,indent=0]
----
include::../examples/kanban-ex1/src/main/resources/com/company/onboarding/view/kanban/kanban-view.xml[tags=data;key-value-collection-container;layout;key-value]
----

[[programmatic-binding]]
=== Programmatic Binding

If you need to define a data container programmatically, you need to remove xref:flow-ui:vc/common-attributes.adoc#dataContainer[dataContainer] attribute:

[source,xml,indent=0]
----
include::../examples/kanban-ex1/src/main/resources/com/company/onboarding/view/kanban/kanban-view.xml[tags=programmatically]
----

After that, in the view controller, use the `ContainerKanbanItems` class to bind the Kanban to a data container:

[source,java,indent=0]
----
include::../examples/kanban-ex1/src/main/java/com/company/onboarding/view/kanban/KanbanView.java[tags=kanban;tasksDc;onInit;setItems]
----

== Attributes

In Jmix there are many xref:flow-ui:vc/common-attributes.adoc[common attributes] that serve the same propose for all components. The following are attributes specific to `kanban`:
[cols="1h,5,1", grid=rows, frame=none]
|===
|*Name*
|*Description*
|*Default*
|[[applyColumnColorToTasks]]applyColumnColorToTasks
|If `true`, the <<columnColor, column color>> will be applied to the cards contained within the column. If a <<color, card color>> is set, it will take precedence over the column color.
|`false`
|[[autoColumnHeightEnabled]]autoColumnHeightEnabled
|If `true`, updates the height of columns depending on the tasks inside. The effect of this property is observed when <<columnColorEntireSurfaceEnabled, columnColorEntireSurfaceEnabled>> is `true`.
|`false`
|[[autoSave]]autoSave
|If `true`, automatically sets a <<saveDelegate, saveDelegate>> that saves the xref:flow-ui:data/data-context.adoc[DataContext] of the current view. Can only be defined declaratively using XML. For programmatic setup, use a <<saveDelegate, saveDelegate>>.
|`false`
|[[collapsible]]collapsible
|If `true`, enables collapsing the column via the corresponding button in the column header, the context menu of the actions in the column header, or by double-clicking on the column header. The state of this attribute can be saved in the xref:flow-ui:facets/settings.adoc[user settings].
|`false`
|[[columnActionsEnabled]]columnActionsEnabled
|If `true`, enables a context menu with actions for each column. The set of actions in the context menu will depend on the value of the <<collapsible, collapsible>> and <<columnHidingAllowed>> attributes.
|`false`
|[[columnColorEntireSurfaceEnabled]]columnColorEntireSurfaceEnabled
|If `true`, displays background in the Kanban column.
|`false`
|[[columnFooterVisible]]columnFooterVisible
|If `true` displays a column footer which shows the summary of the column. Works in conjunction with the <<columnSummaryEnabled, columnSummaryEnabled>> attribute value.
|`false`
|[[columnHidingAllowed]]columnHidingAllowed
|If `true`, adds a column hiding actions to the column header context menu. The state of this attribute can be saved in the xref:flow-ui:facets/settings.adoc[user settings].
|`true`
|[[columnReorderingAllowed]]columnReorderingAllowed
|If `true`, enables column reordering using drag and drop action. The state of this attribute can be saved in the xref:flow-ui:facets/settings.adoc[user settings].
|`false`
|[[columnSummaryEnabled]]columnSummaryEnabled
|If `true`, displays task count information in the header of each column. Information can also be displayed in the column footer. See <<columnFooterVisible, columnFooterVisible>>.
|`false`
|[[columnsWidth]]columnsWidth
|Sets the width of all column in pixels.
|`0`
|[[dragAllowed]]dragAllowed
|If `true`, enables dragging for columns and cards.
|`true`
|[[dropAllowed]]dropAllowed
|If `true`, enables dropping for columns and cards.
|`true`
|[[dropPlaceholderAllowed]]dropPlaceholderAllowed
|If `true`, then if a task overlaps another task, a blank space appears for it.
|`false`
|[[hierarchyMode]]hierarchyMode
|Specifies the hierarchy mode of the nested columns with the following possible values: `COLUMNS`, `TABS`. See <<hierarchy-mode, Hierarchy Mode>>.
|`COLUMNS`
|[[swimlanesFrom]]swimlanesFrom
|Sets the index of the column at which to start the swimlanes. See <<swimlanes, Swimlanes>>.
|`0`
|[[swimlanesTo]]swimlanesTo
|Sets the index of the column at which to end the swimlanes.
|–
|[[taskColorEntireSurfaceEnabled]]taskColorEntireSurfaceEnabled
|If `true`, applies the task color to the task card background. The attribute takes precedence over the <<columnColor, column color>>.
|`false`
|[[taskDueDateVisible]]taskDueDateVisible
|If `ture`, displays task due icon.
|`false`
|[[taskPosition]]taskPosition
|Specifies the task position for columns with the following possible values: `ALL`, `LEAF`. See <<task-position, Task Position>>.
|`ALL`
|[[taskPriorityVisible]]taskPriorityVisible
|If `true`, displays the priority icon for a task card.
|`true`
|[[taskProgressVisible]]taskProgressVisible
|If `true`, displays a progress bar for a task card with the task's progress value.
|`false`
|[[taskTagsVisible]]taskTagsVisible
|If `true`, displays tags for a task card.
|`true`
|[[taskUserAvatarVisible]]taskUserAvatarVisible
|If `true`, displays user avatar for a task card.
|`false`
|===

== Handlers

In Jmix there are many xref:flow-ui:vc/common-handlers.adoc[common handlers] that are configured in the same way for all components. The following are handlers specific to `kanban`:

include::flow-ui:vc/handler-generation-tip.adoc[]

[cols="1h,6", grid=rows, frame=none]
|===
|*Name*
|*Description*
|[[KanbanColumnClickEvent]]KanbanColumnClickEvent
|`io.jmix.kanbanflowui.kit.component.event.KanbanColumnClickEvent` fired when a column header is clicked. Corresponds to the `columnClick` DOM event.
|[[KanbanColumnDoubleClickEvent]]KanbanColumnDoubleClickEvent
|`io.jmix.kanbanflowui.kit.component.event.KanbanColumnDoubleClickEvent` fired when a column header is double-clicked. Corresponds to the `columnDoubleClick` DOM event.
|[[KanbanColumnCollapseEvent]]KanbanColumnCollapseEvent
|`io.jmix.kanbanflowui.kit.component.event.KanbanColumnCollapseEvent` fired when a column is collapsed using the column's actions menu, double-clicking the column header, or the programmatically changing the <<columnCollapse, column collapse>> property. Corresponds to the `columnCollapse` DOM event.
|[[KanbanColumnExpandEvent]]KanbanColumnExpandEvent
|`io.jmix.kanbanflowui.kit.component.event.KanbanColumnExpandEvent` fired when a column is expanded using double-clicking the column header, or the programmatically changing the <<columnCollapse, column collapse>> property. Corresponds to the `columnExpand` DOM event.
|[[KanbanColumnHideEvent]]KanbanColumnHideEvent
|`io.jmix.kanbanflowui.kit.component.event.KanbanColumnHideEvent` fired when a column is hided using double-clicking the column header, or the programmatically changing the <<columnCollapse, column collapse>> property. Corresponds to the `columnHide` DOM event.
|[[KanbanColumnReorderEvent]]KanbanColumnReorderEvent
|`io.jmix.kanbanflowui.kit.component.event.KanbanColumnReorderEvent` fired when the column order changes. Corresponds to the `columnReorder` DOM event.
|[[KanbanColumnShowEvent]]KanbanColumnShowEvent
|`io.jmix.kanbanflowui.kit.component.event.KanbanColumnShowEvent` fired when a column is shown using column's actions menu, or the programmatically changing the <<columnVisible, column visible>> property. Corresponds to the `columnShow` DOM event.
|[[KanbanDragEndEvent]]KanbanDragEndEvent
|`io.jmix.kanbanflowui.kit.component.event.KanbanDragEndEvent` fired when a task card is dropped. Corresponds to the `dragEnd` DOM event.
|[[KanbanDragStartEvent]]KanbanDragStartEvent
|`io.jmix.kanbanflowui.kit.component.event.KanbanDragStartEvent` fired when a task card is dragged. Corresponds to the `dragStart` DOM event.
|[[KanbanTaskClickEvent]]KanbanTaskClickEvent
|`io.jmix.kanbanflowui.kit.component.event.KanbanTaskClickEvent` fired when a task is clicked. Corresponds to the `taskClick` DOM event.
|[[KanbanTaskDoubleClickEvent]]KanbanTaskDoubleClickEvent
|`io.jmix.kanbanflowui.kit.component.event.KanbanTaskDoubleClickEvent` fired when a task is double-clicked. Corresponds to the `taskDoubleClick` DOM event.
|[[saveDelegate]]saveDelegate
| Adds a save delegate function which will be used to save data that has been updated using Kanban. Called when a task card is dragged across the board and when the task priority changes using the corresponding icon.
|===

== See Also

See the https://www.htmlelements.com/docs/kanban-api/[Kanban Docs^] for more information.