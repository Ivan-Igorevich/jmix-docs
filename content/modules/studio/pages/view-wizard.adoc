= 视图创建向导
:page-aliases: screen-wizard.adoc

Studio 提供一个向导，可以使用模板创建 xref:flow-ui:views/views.adoc[视图]。使用 xref:studio:tool-window.adoc[Jmix 工具窗口] 内的 *New -> View* 菜单可以创建新视图。

image::wizard-create-view.png[align="center",width="265"]

向导可以为视图生成基本的代码，包括必要的组件和配置，能节省不少时间。向导提供不同类型视图的模板，包括：

* 基于实体的视图：展示或编辑与特定 xref:data-model:entities.adoc[实体] 相关的数据
* 基于 DTO 的视图：展示或编辑 xref:data-model:entities.adoc#dto[DTO] 的数据
* 其他类型的视图：向导可以创建不关联任何实体的空视图、xref:flow-ui:fragments/fragments.adoc[fragments]、带 xref:flow-ui:vc/components/horizontalMenu.adoc[顶部菜单] 的主视图等等。

image::wizard-templates.png[align="center",width="776"]

[[creating-entity-based-views]]
== 创建基于实体的视图

如需为一个实体创建 CRUD 视图，可以在树节点中选择实体，然后用右键菜单的 *New -> View*。

image::wizard-entity.png[align="center",width="536"]

另一个方式是通过实体设计器 xref:studio:entity-designer.adoc#actions-panel[操作面板] 的 *Views -> Create View* 进行创建。

image::create-view-from-entity-designer.png[align="center",width="800"]

在向导的 *Create Jmix View* 页中，选择一个合适的模板。

下一步中，可以修改自动生成的视图属性。

image::wizard-properties.png[align="center",width="780"]

[NOTE]
====
如果勾选 *Advanced* 中的 *Use Data Repositories*，并选择了一个已有的 xref:studio:data-repository-wizard.adoc[data repository]，向导会自动生成 load 和 save 代理，并调用合适的 repository 方法。
====

在 *Entity list and detail options* 步骤中，可以配置视图如何显示并与实体数据交互。

例如，可以配置 DataGrid 的 xref:flow-ui:actions/list-actions.adoc[操作]，在列表视图中显示。还可以配置 DataGrid 的多选、xref:flow-ui:vc/components/dataGrid.adoc#columnReorderingAllowed[列重排]、xref:flow-ui:vc/components/dataGrid.adoc#resizable[列宽修改] 等。

image::wizard-view-options.png[align="center",width="780"]

点击 *Next*。

在 *Entity list view fetch plan* 和 *Entity detail view fetch plan* 步骤中，可以设置视图展示的数据字段。可以使用 xref:data-access:fetching.adoc#built-in-fetch-plans[内置] 的 fetch plan 或创建新的 fetch plan，支持通过 xref:studio:fetch-plan-designer.adoc[Fetch Plan 设计器] 或 xref:data-access:fetching.adoc#creating-fetch-plans[编程式] 创建。

image::wizard-fetch.png[align="center",width="780"]

点击 *Next*。

向导的最后一步中，可以设置视图的标题。

image::wizard-titles.png[align="center",width="780"]

点击 *Create* 按钮后，会生成视图的 XML 和 Java 控制器。并更新 xref:localization:message-bundles.adoc[消息包] 文件。如果是创建了列表视图，还会在主菜单添加一个菜单项。

之后可以使用 xref:studio:view-designer.adoc[视图设计器] 进一步配置视图。

[[creating-dto-based-views]]
== 创建基于 DTO 的视图

创建基于 DTO 视图的步骤与 <<creating-entity-based-views,创建基于实体的视图>> 类似。

[[creating-blank-view]]
== 创建空视图

`Blank View` 模板可以作为自定义视图的起点。这个模板提供了视图的基本结构，包含最少的组件和逻辑。

当需要完全控制视图的设计和行为时，可以使用此模板。所有必需的组件、布局、数据绑定和事件处理都需要手动添加。

image::blank-view-template.png[align="center",width="780"]

之后可以使用 xref:studio:view-designer.adoc[视图设计器] 进一步配置视图。

[[creating-blank-fragment]]
== 创建空 fragment

`Blank Fragment` 模板可以创建一个可重用的视图 xref:flow-ui:fragments/fragments.adoc[fragment]，fragment 能嵌入到其他视图或 fragment 中。

image::blank-fragment-template.png[align="center",width="780"]

点击 *Create* 按钮后，会生成 fragment 的 XML 和类文件。

之后可以使用 xref:studio:view-designer.adoc[视图设计器] 进一步配置 fragment。

[[main-view-top-menu]]
== 创建带顶部菜单的主视图

Jmix 默认提供带列表菜单的主视图。

Studio 的视图创建向导提供了一个带顶部菜单的主视图模板。

如果想用新的主视图替换原来的主视图，需要勾选向导第一步的 *Use as default main view*。

image::main-view-top-menu-template.png[align="center",width="780"]

Studio 会替换所有视图中的 `@Route` 注解的 `layout` 属性，并在 xref:flow-ui:ui-properties.adoc#jmix.ui.main-view-id[jmix.ui.main-view-id] 应用程序属性中设置新视图的 id。
