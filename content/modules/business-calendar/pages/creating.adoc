= 创建工作日历

工作日历可以在 <<business-calendars-runtime,运行时>> 通过特定的视图创建，或在 <<business-calendars-design-time,设计时>> 使用带注解的 Java 接口创建。

[[business-calendars-runtime]]
== 运行时创建工作日历

组件安装完成后，可以从应用程序的主菜单打开 *Business calendars* 列表视图。

image::business-calendar-list.png[align="center" width="1392"]

在页面中，点击 *Create* 按钮打开 *Business calendar editor*。

image::business-calendar-editor.png[align="center" width="1392"]

输入下列参数：

* *Name* - 日历的可读描述。
* *Code* - 日历的唯一标识符。

然后可以为日历定义工作日和工作时间了，同时还可以在不同的标签页中定义节假日或其他非工作日。

=== 假日

在 *Holidays（假日）* 标签页，点击 *Create* 添加假日和周末。

image::business-calendar-holidays.png[align="center" width="1392"]

该组件支持下列类型的假日：

* *Day of week（星期）* - 允许指定每周的假日；例如，一般是星期六和星期日。
+
image::business-calendar-day-of-week.png[align="center" width="484"]

* *Specific date holiday（特定日期假日）* - 允许设置某一日期的特定假日，例如，每年不同的调休假。
+
image::business-calendar-specific-date-holiday.png[align="center" width="484"]

* *Annual holiday（年固定假日）* - 每年固定的假日，例如，`1 月 1 日`。
+
image::business-calendar-annual-holiday.png[align="center" width="484"]

* *Cron-based holiday（基于 Cron 的假日）* - 允许用 quartz CRON 格式指定特殊的假日。参阅 http://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/crontrigger.html[Cron 入门^] 了解更多信息。
+
image::business-calendar-cron-holiday.png[align="center" width="484"]
+
可以用来指定一些重要的假期，例如，_每个月的第三个星期五_ 或 _7月的第一个星期一_ 等。

=== 工作日计划

在 *Working schedule（工作日计划）* 标签页，可以为一周的每天设置工作小时数。每天可以有多个工作时段，但是这些时段不能相互覆盖。

image::working-schedule-editor.png[align="center" width="1392"]

=== 额外工作日

还可以在 *Additional business days（额外工作日）* 标签页将某些假日定义为工作日。即便这样配置的某一天属于假日，也会按照工作日考虑。还支持设定不同的工作时间。

image::additional-business-day-editor.png[align="center" width="1392"]

[[business-calendars-design-time]]
== 设计时创建工作日历

设计时可以用带注解的 Java 接口创建工作日历，示例：

[source,java,indent=0]
----
include::example$/calendars-ex1/src/main/java/com/company/calendarsex1/calendars/SampleBusinessCalendar.java[tags=business-calendar]
----

<1> 带注解的工作日历是一个使用 `@BusinessCalendar` 注解的接口。你需要为该注解指定下列参数：
* `name` - 日历的可读描述。
* `code` - 日历的唯一标识符。
<2> 指定假日 - 以 quartz CRON 格式
<3> 指定假日 - 每周固定假日。
<4> 指定假日 - 特定日期假日。
<5> 指定假日 - 每年一次的假日。
<6> 指定工作日 - 计划工作日。
<7> 指定工作日 - 额外工作日。

设计时创建的工作日历与其他日历一起在列表展示，但是只能查看，不能修改。

image::business-calendars.gif[align="center" width="1282"]
