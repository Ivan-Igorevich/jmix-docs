= loginForm 登录表单

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/custom-login" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

`loginForm` 是一个可以使用用户名和密码验证用户的表单。

* XML 元素：`loginForm`

* Java 类：`JmixLoginForm`

== 基本用法

默认情况下，`loginForm` 包含用户名和密码字段、登录按钮以及 3 个可选元素：地区语言下拉框、**Remember me（记住我）** 复选框以及 **Forgot password（忘记密码）** 按钮。可以通过配置属性显示或隐藏可选元素。

image::visual-components/components/login-form.png[align="center", width="320"]

下面是一个简单用例，用户可以通过登录表单进行身份验证：

[source,xml,indent=0]
----
<loginForm id="loginForm"/>
----

[source,java,indent=0]
----
include::example$onboarding/src/main/java/com/company/onboarding/view/component/loginform/LoginFormView.java[tags=login-view-support;on-login-handler]
----

<1> 使用选择的地区语言。
<2> 根据复选框的值检查是否在多个会话中记住用户。

[[Customization]]
== 自定义

表单支持自定义标题、字段名以及登录失败的错误消息。使用内部的 XML 元素 `form` 和 `errorMessage` 并指定属性值即可：

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/loginform/login-form-view.xml[tags=custom]
----

TIP: 属性值可以是文本或者 xref:localization:message-bundles.adoc[消息包] 中的键值。

[[Change-locale]]
== 修改应用程序的地区语言

用户可以在进入应用程序之前选择地区语言。需要 xref:localization:message-bundles.adoc#setting-locales[配置地区语言]，然后用户可以在地区下拉框进行选择。

在登录表单中，可以使用 <<LocaleChangedEvent,LocaleChangedEvent>> 处理器修改语言而无需重新加载页面。读取 xref:localization:message-bundles.adoc[消息包] 中本地化的信息并设置：

[source,java,indent=0]
----
include::example$onboarding/src/main/java/com/company/onboarding/view/component/loginform/LoginFormView.java[tags=on-locale-changed]
----

这种方法能直接修改语言，提升用户体验。

== XML 属性

xref:vc/common-attributes.adoc#id[id] -
xref:vc/common-attributes.adoc#colspan[colspan] -
xref:vc/common-attributes.adoc#enabled[enabled] -
<<forgotPasswordButtonVisible,forgotPasswordButtonVisible>> -
<<localesVisible,localesVisible>> -
<<rememberMeVisible,rememberMeVisible>> -
xref:vc/common-attributes.adoc#visible[visible]

[[forgotPasswordButtonVisible]]
=== forgotPasswordButtonVisible

设置是否显示 **Forgot password（忘记密码）** 按钮。

[[localesVisible]]
=== localesVisible

设置是否显示地区语言下拉框。

[[rememberMeVisible]]
=== rememberMeVisible

设置是否显示 **Remember me（记住我）** 复选框。

== 事件和处理器

xref:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
xref:vc/common-handlers.adoc#DetachEvent[DetachEvent] -
<<ForgotPasswordEvent,ForgotPasswordEvent>> -
<<LocaleChangedEvent,LocaleChangedEvent>> -
<<LoginEvent,LoginEvent>> -
<<RememberMeChangedEvent,RememberMeChangedEvent>>

include::../handler-generation-tip.adoc[]

[[ForgotPasswordEvent]]
=== ForgotPasswordEvent

当用户点击 **Forgot password（忘记密码）** 时，发送 `ForgotPasswordEvent` 事件。为该事件添加处理器可以为用户提供找回密码的功能。

[[LocaleChangedEvent]]
=== LocaleChangedEvent

当用户选择不同的地区语言时发送 `LocaleChangedEvent` 事件。在这个事件的处理器中可以用新选择的语言更新表单的字段标签和错误信息。

[[LoginEvent]]
=== LoginEvent

当用户尝试登录时发送 `LoginEvent` 事件。

[[RememberMeChangedEvent]]
=== RememberMeChangedEvent

当 **Remember me（记住我）** 复选框的选择状态发生变化时发送 `RememberMeChangedEvent` 事件。

== 参考

{vaadin-docs}/components/login[Vaadin 文档^]
