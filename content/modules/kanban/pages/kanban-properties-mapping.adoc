= Properties Mapping

In this chapter, you will create:

* Additional `KanbanTask` entity attributes.
* UI fields for editing new attributes.
* Mapping Kanban task card fields to `KanbanTask` entity properties.

[[additional-attribute-creation]]
== Create Additional KanbanTask Entity Attributes

Kanban task cards can display specific fields of a Kanban task entity. There is a list of all supported attributes:

* `id` – any standard identifier type. Required attribute.
* `status` – string or enumeration type. Required attribute.
* `text` – string type. Required attribute.
* `color` – string type. The string value must be formatted in CSS color.
* `dueDate` – any standard date type.
* `priority` – string or enumeration type.
* `progress` – integer number type;
* `swimlane` – string or enumeration type.
* `tags` – string type. The string value must be a comma-separated sequence of tags without space symbols.
* `userAvatar` – `FileRef` or a byte array type.
* `username` – string type.

To start, you'll need to add all attributes *except* `swimlane` to the `KanbanTask` entity.

Open the `KanbanTask.java` class. Define the additional attributes:

image::add-additional-attributes.png[align="center",width="1164"]

Now you need to add attributes to the detail view. Use the *Add to Views* (image:add-attribute-to-screens.svg[]) button in the *Attributes* toolbar:

image::add-to-view-action.png[align="center",width="1168"]

The appeared dialog window will show all views that display the `KanbanTask` entity. Select only `KanbanTask.detail` view:

image::add-to-view-action-2.png[align="center",width="1122"]

Click *OK*.

Studio will add the corresponding UI fields to `formLayout` of the `KanbanTask.detail` view. Fields must be added to the `kanban-task-detail-view.xml`:

image::additional-fields-generation-result.png[align="center",width="894"]

Restart the application to generate Liquibase changelogs.

image::additional-attributes-changelog.png[align="center",width="2072"]

Click *Save and run*.

Open the `KanbanTask.detail` view in your browser. New attributes are available for editing.

image::additional-fields-ui.png[align="center",width="2422"]

[[properties-mapping]]
== Mapping Entity Properties

In order to map an entity attribute to a Kanban card field, you need to add a xref:kanban-component.adoc#propertiesMapping[propertiesMapping] element to the `kanban` component.

Locate `kanban-task-list-view.xml` in the *Jmix* tool window and double-click it. Choose `kanban` within the *Jmix UI* hierarchy panel or in the XML descriptor. Next click the *Add* button in the component inspector panel. From the drop-down list, opt for `PropertiesMapping`:

image::add-properties-mapping.png[align="center",width="400"]

In the dialog windows that opens, enter the following attribute mapping:

image::basic-attribute-mapping.png[align="center",width="1142"]

Fill in the remaining attributes using the component inspector or the XML markup of the `propertyMapping` element:

image::attribute-mapping.png[align="center",width="400"]

In order for attributes to be displayed on the card, you need to enable visibility for the corresponding attributes of the `kanban` component.

Chose `kanban` within the *Jmix UI* hierarchy panel or in the XML markup. Next check the `taskDueDateVisible`, `taskPriorityVisible`, `taskProgressVisible`, `taskTagsVisible`, `taskUserAvatarVisible` boxes.

image::kanban-additional-attributes.png[align="center",width="700"]

Press *Ctrl/Cmd+S* and switch to the running application. The appearance of the cards will be changed.

image::kanban-task-list-view-updated.png[align="center",width="1024"]

Now the changes you make to the card will be displayed on the Kanban board.

image::filled-card.png[align="center",width="2468"]

image::kanban-task-list-view-updated-2.png[align="center",width="2380"]