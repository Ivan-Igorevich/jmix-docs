= Диалоги

Интерфейс `Dialogs` разработан для отображения стандартных диалоговых окон. Диалоговое окно - это небольшое всплывающее окно, которое можно использовать для представления информации и элементов пользовательского интерфейса.

Методы `createMessageDialog()`, `createOptionDialog()` и `createInputDialog()` - это точки входа в fluent API, который позволяет создавать и отображать диалоговые окна.

[[message-dialog]]
== Диалог сообщения

Диалога сообщения отображает сообщение пользователю.

image::dialogs/message-dialog.png[align="center", width = 399]

В следующем примере диалог сообщения отображается при нажатии кнопки пользователем:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/dialogsandnotifications/dialogs/DialogsSampleView.java[tags=inject-dialogs;messageDialog-1]
----

<1> Добавляет заголовок диалога.
<2> Добавляет текстовое сообщение для отображения в диалоге.

[[text-formatting]]
=== Форматирование текста

Форматирование текста доступно с использованием HTML - диалог может отображать HTML-контент с помощью метода `withContent()`. HTML-фрагмент должен быть инкапсулирован в компоненте:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/dialogsandnotifications/dialogs/DialogsSampleView.java[tags=inject-dialogs;messageDialog-html]
----

[[appearance]]
=== Внешний вид

Следующие методы позволяют настраивать внешний вид и поведение диалога сообщения:

[[msg-dialog-modal]]
* `withModal()` - если передано значение `false`, диалоговое окно отображается как немодальное, что позволяет пользователям взаимодействовать с другими частями приложения. По умолчанию диалоги модальные.

[[msg-dialog-close-on-click-outside]]
* `withCloseOnOutsideClick()` - если диалог модальный и передано значение `true`, то пользователь может закрыть диалог, кликнув в окне приложения за пределами диалога.

[[msg-dialog-width-height]]
* `withWidth()`, `withHeight()` - устанавливают размер диалога.

Например:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/dialogsandnotifications/dialogs/DialogsSampleView.java[tags=inject-dialogs;messageDialog-custom]
----

[[option-dialog]]
== Диалог с вариантами

Диалог с вариантами отображает сообщение и набор кнопок для выбора пользователем.

image::dialogs/option-dialog.png[align="center", width = 400]

Используйте метод `withActions()` для предоставления xref:actions.adoc[действий], каждое из которых представлено кнопкой в диалоге. Например:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/dialogsandnotifications/dialogs/DialogsSampleView.java[tags=inject-dialogs;optionsDialog-1]
----

<1> Если пользователь нажмет "Yes", диалог закроется и вызовется метод `addCustomer()`.

Базовый класс `DialogAction` предназначен для создания действий со стандартными именами и значками. Поддерживаются пять типов действий, определенных перечислением `DialogAction.Type`: `OK`, `CANCEL`, `YES`, `NO`, `CLOSE`. Названия кнопок извлекаются из xref:localization:message-bundles.adoc[пакета сообщений].

[[background-task-dialog]]
== Диалог фоновой задачи

Диалог фоновой задачи обеспечивает удобный для пользователя опыт для длительных задач, где пользователь может отслеживать прогресс и отменять операцию при необходимости.

TIP: Для получения дополнительной информации о механизме фоновых задач, посетите статью xref:background-tasks.adoc[Фоновые Задачи].

image::dialogs/backgroundtask-dialog.png[align="center", width = 402]

Чтобы настроить диалог, передайте в него объект фоновой задачи:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/dialogsandnotifications/dialogs/DialogsSampleView.java[tags=inject-dialogs;backgroundTaskDialog]
----

<1> Передайте объект фоновой задачи в диалог.
<2> Установите количество секций в индикаторе прогресса в соответствии с количеством задач.
<3> Разрешить пользователю прерывать задачу.

[[input-dialog]]
== Диалог ввода

Диалог ввода - универсальный инструмент, который позволяет создавать формы ввода с использованием API и часто позволяет избежать создания экранов для ввода тривиальных данных. Он позволяет вводить значения разных типов, выполнять проверку ввода и предоставлять различные действия, доступные для выбора пользователем.

image::dialogs/input-dialog.png[align="center", width = 560]

Рассмотрим некоторые примеры.

[[standard-parameters]]
=== Стандартные параметры

Используйте метод `withParameters()` для добавления параметров, каждый из которых будет представлен полем ввода в диалоге.
Следующий пример создает диалоговое окно ввода с параметрами стандартных типов и стандартными действиями `OK/Cancel`:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/dialogsandnotifications/dialogs/DialogsSampleView.java[tags=inject-dialogs;inputDialog-standard-parameters]
----

<1> Указывает обязательный строковый параметр.
<2> Указывает целочисленный параметр с значением по умолчанию.
<3> Указывает параметр-сущность.
<4> Указывает параметр-перечисление.
<5> Указывает стандартные действия `OK/Cancel`, представленные кнопками внизу диалога.
<6> В обработчике закрытия можно проверить, какое действие выбрал пользователь.
<7> Событие закрытия содержит введенные значения, которые можно получить с использованием идентификаторов параметров.

[[custom-paramters]]
=== Пользовательские параметры

Следующий пример иллюстрирует создание пользовательского параметра, который позволяет пользователю выбрать значение из выпадающего списка:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/dialogsandnotifications/dialogs/DialogsSampleView.java[tags=inject-dialogs;inputDialog-custom-parameters]
----

<1> Указывает пользовательский параметр.
<2> Создает выпадающий список внутри поля пользовательского параметра.
<3> Загружает список вариантов в выпадающий список.

[[custom-validator]]
=== Пользовательский валидатор

Диалог ввода поддерживает базовую проверку: он может проверять тип введенных значений и что обязательное поле не пусто. Кроме того, вы можете добавить более общие пользовательские валидаторы.

Следующий пример добавляет валидатор, проверяющий, что хотя бы один параметр введен:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/dialogsandnotifications/dialogs/DialogsSampleView.java[tags=inject-dialogs;inputDialog-custom-validator]
----

<1> Пользовательский валидатор, добавляющий логику для обеспечения ввода хотя бы одного параметра.
<2> В валидаторе можно получить значения параметров из объекта контекста.
<3> Валидатор возвращает ошибки валидации, если параметры не введены.