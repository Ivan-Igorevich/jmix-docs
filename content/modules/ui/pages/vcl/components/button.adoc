= Button 按钮
:page-aliases: backoffice-ui:vcl/components/button.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/sampler/#main/sample?id=button-simple" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

`Button - 按钮` 用户点击执行操作。

组件的 XML 名称：`button`。

== 基本用法

按钮上可以有标题、图标或者两者皆有：

image::vcl/components/button.png[align="center"]

下面是从本地化消息中获取文本显示到按钮和提示上的示例：

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=button-1]
----

按钮上的标题是用 xref:vcl/xml.adoc#caption[caption] 属性来设置，弹出提示用 xref:vcl/xml.adoc#description[description] 来设置。

如需处理按钮的点击事件，可以在界面控制器中订阅 `ClickEvent`：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/button/ButtonScreen.java[tags=click-handler]
----

[[disableOnClick]]
如果 `disableOnClick` 属性设置成 `true`，这个按钮在点击之后就自动禁用，主要用来防止（意外的）多次点击。之后可以通过调用 `setEnabled(true)` 把按钮恢复成可点击状态。

xref:vcl/xml.adoc#icon[icon] 属性定义了图标在主题目录中的位置或者图标集中的名称。详细信息请参阅 xref:icons.adoc[]。

创建带有图标按钮的例子：

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=button-icon]
----

[[action]]
== 操作

另一个处理按钮点击的方法是将按钮与一个 xref:actions.adoc[操作（Action）] 进行关联：

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=action-1;action-2;layout-end]
----

可以将按钮与窗口中或者表格类组件（ 表格类组件实现了 `Component.ActionsHolder` 接口）中定义的任何操作进行关联。对于窗口中的操作，可在按钮的 `action` 指定操作 id，如上面例子所示。对于带操作的组件，可指定 `component_id.action_id`，下面的例子中，按钮关联了 `usersTable` 组件的 `create` 操作：

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=action-3;table-end]
----

按钮的操作也可以在界面控制器通过编程的方式创建，方法是在界面控制器中创建继承自 xref:actions/base-action.adoc[BaseAction] 的类。

[NOTE]
====

如果为 `Button` 设置了 `Action` 实例，则下列 `Button` 属性的优先级会高于 `Action` 的相同属性：

* xref:vcl/xml.adoc#caption[caption],
* xref:vcl/xml.adoc#description[description],
* xref:vcl/xml.adoc#enable[enable],
* xref:vcl/xml.adoc#icon[icon],
* <<primary,primary>>,
* <<shortcut,shortcut>>,
* xref:vcl/xml.adoc#visible[visible].

也就是说，对于这些属性，如果 `Button` 本身没有设置，才会从 `Action` 的属性导入。
====

[[shortcut]]
== 快捷键

`shortcut` 属性用来为按钮指定一个快捷键组合。可选的功能键为：`ALT`、`CTRL`、`SHIFT`，使用 "-" 与其他键分隔。示例：

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=shortcut]
----

[[styles]]
== 预定义样式

[[primary]]
`primary` 属性用来将按钮设置为高亮显示，默认情况下，如果这个按钮调用的操作是 xref:actions/declarative-actions.adoc#primary[primary] 的，这个按钮会被设置为高亮显示。

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=primary-btn]
----

image::vcl/components/button-primary.png[align="center"]

这个高亮样式在 `hover` 和 `helium` 主题中是默认开启的；如果希望在 `halo` 主题中使用这个功能，可以通过设置 xref:themes/custom_theme.adoc#theme-modify-common-parameters[样式变量] `$jmix-highlight-primary-action` 为 `true` 来开启。

[[stylename]]
可以在 XML 或者界面控制器中用 `stylename` 属性为 `Button` 按钮设置预定义样式：

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=borderless-btn]
----

如果使用编程的方式来设置样式，可以直接用 `ThemeClassNames` 类里面的以 `BUTTON_` 开头的一些主题常量：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/button/ButtonScreen.java[tags=set-style-name]
----

预定义样式：

[[button-borderless]]
* `borderless` - 无边框的按钮。该样式可以与其他 `Button` 样式混用。
+
image::vcl/components/borderless-button.gif[align="center"]

[[button-borderless-colored]]
* `borderless-colored` - 无边框但是具有彩色按钮标题。该样式可以与其他 `Button` 样式混用。
+
image::vcl/components/borderless-colored-button.gif[align="center"]

[[button-danger]]
* `danger` - 当按钮的操作比较危险时可以使用的一种警示按钮（比如会导致数据丢失或者其他不可撤消的操作）。该样式可以与其他 `Button` 样式混用。
+
image::vcl/components/danger-button.gif[align="center"]

[[button-friendly]]
* `friendly` - 当按钮的操作比较安全时可以用的一种主要操作的按钮，比如不会导致数据丢失或者其他不可撤消的操作。该样式可以与其他 `Button` 样式混用。
+
image::vcl/components/friendly-button.gif[align="center"]

[[button-icon-align-right]]
* `icon-align-right` - 将按钮的图标对齐在按钮名称的右侧。该样式可以与其他 `Button` 样式混用。
+
image::vcl/components/icon-right-button.gif[align="center"]

[[button-icon-align-top]]
* `icon-align-top` - 将按钮的图标放到按钮标题的上方。该样式可以与其他 `Button` 样式混用。
+
image::vcl/components/icon-top-button.gif[align="center"]

[[button-icon-only]]
* `icon-only` - 只显示按钮的图标，并且把按钮调整成正方形。
+
image::vcl/components/button-icon-only.png[align="center"]

[[button-primary]]
* `primary` - 主要的操作按钮，比如用户在填写表单时按下回车键的操作按钮。谨慎使用，一般来说一个界面只有一个主要按钮。

[[button-quiet]]
* `quiet` - "安静的" 按钮，跟 `borderless` 很像，只有在鼠标悬停到这个按钮上面才会有样式变化。该样式可以与其他 `Button` 样式混用。
+
image::vcl/components/quiet-button.gif[align="center"]

`Button` 的外观可以使用带 `$jmix-button-*` 前缀的 SCSS 变量进行自定义。在创建了 xref:themes/custom_theme.adoc[自定义主题] 之后，可以在可视化编辑器中修改这些变量。

[[method-click]]
== Click 方法

`Button` 接口的 `click()` 方法模拟按钮点击，通知所有服务端的监听器。

按钮如果禁用了，则无操作。

[[handlers]]
== 事件和处理器

include::../events-hanlers-generation-tip.adoc[]

[[click-event]]
=== ClickEvent

`ClickEvent` 当用户点击按钮时发送。

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/button/ButtonScreen.java[tags=click-handler-1]
----

<1> `@Subscribe` 注解包含按钮 id。
<2> 如果需要，可以从 event 对象中获取点击的按钮。

如需通过编程的方式注册事件处理器，可以使用组件的 `addClickListener()` 方法。

[[xml]]
== Button XML 属性

include::../xml-studio-tip.adoc[]

<<action,action>> -
xref:vcl/xml.adoc#align[align] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:vcl/xml.adoc#colspan[colspan] -
xref:vcl/xml.adoc#css[css] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
<<disableOnClick,disableOnClick>> -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:vcl/xml.adoc#height[height] -
xref:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
<<primary,primary>> -
xref:vcl/xml.adoc#responsive[responsive] -
xref:vcl/xml.adoc#rowspan[rowspan] -
<<shortcut,shortcut>> -
<<stylename,stylename>> -
xref:vcl/xml.adoc#tab-index[tabIndex] -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]
